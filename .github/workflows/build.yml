name: build

on:
  workflow_dispatch:

jobs:
  build: 
    runs-on: "ubuntu-latest"

    steps:
      - task: UseNode@1
        inputs:
          version: "16.x"
        displayName: "Install Node.js"

      - script: npm install
        workingDirectory: "./src/client"
        displayName: "Install node modules"

      - script: npm run build install
        workingDirectory: "./src/client"
        displayName: "Install node modules"

      - task: CopyFiles@2
        inputs:
          Contents: "build/**" # Pull the build directory (React)
          TargetFolder: "$(Build.ArtifactStagingDirectory)"

      - task: PublishBuildArtifacts@1
        inputs:
          PathtoPublish: $(Build.ArtifactStagingDirectory) # dist or build files
          ArtifactName: "www" # output artifact named www
